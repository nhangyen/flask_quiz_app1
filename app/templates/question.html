{% extends 'base.html' %}

{% block content %}
    <div class="ques-div text-center">
        <form method="post" novalidate>
            <h2 class="qnum">Question {{ q.q_id }}</h2>
            <div class="dotted-spaced"></div>
            <hr>
            <h1 class="ques-heading">{{ q.ques }}</h1>
            <div class="options-div mt-4">
                {% for option in form.options %}
                    <div class="form-check" id="check-{{ option.id }}" onclick="selectOption('{{ option.id }}')">
                        {{ option(class="form-check-input", id=option.id, onchange="toggleSubmitButton(); highlightOption(this)", hidden=True) }}
                        <label class="form-check-label" for="{{ option.id }}">
                            {{ option.label }}
                        </label>
                    </div>
                {% endfor %}

                {% for error in form.options.errors %}
                    <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="mt-4">
                {{ form.submit(class="btn btn-primary btn-lg sub-btn", disabled="disabled", id="submit-button") }}
            </div>
        </form>
    </div>

    <style>
        .ques-div {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 20px auto;
        }

        .ques-heading {
            font-size: 24px;
            margin-bottom: 20px;
            word-wrap: break-word;
        }

        .form-check {
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            transition: background-color 0.2s;
            cursor: pointer;
        }

        .form-check:hover {
            background-color: #e9ecef;
        }


        .form-check.selected {
            background-color: #007bff;
            color: white;
        }

        .form-check-input {
            display: none;
        }
    </style>

    <script>
        function toggleSubmitButton() {
            const options = document.querySelectorAll('input[name="options"]');
            const submitButton = document.getElementById('submit-button');
            let selected = false;

            options.forEach(option => {
                if (option.checked) {
                    selected = true;
                }
            });

            submitButton.disabled = !selected;
        }

        function highlightOption(selectedOption) {
            const options = document.querySelectorAll('.form-check');
            options.forEach(option => {
                option.classList.remove('selected');
            });
            const selectedDiv = document.getElementById('check-' + selectedOption.id);
            selectedDiv.classList.add('selected');
        }

        function selectOption(optionId) {
            const radioButton = document.getElementById(optionId);
            radioButton.checked = true;
            toggleSubmitButton();
            highlightOption(radioButton);
        }
    </script>
{% endblock %}
